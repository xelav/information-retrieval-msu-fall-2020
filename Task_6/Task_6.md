# Задание 6 от 28.09.20 (вторая задача)

Валентин Александров, 620 группа

## Постановка задачи

- При разметке релевантных документов эксперты использовали шкалу от 0 (нерелевантные документы) до 4 баллов.
- При тестировании систем выяснилось, что системы выдали следующие результаты поиска ответов на один и тот же запрос:
    Система 1: 4, 2, 3, 1, 2, 0 (и далее 0)
    Система 2: 3, 2, 4, 4, 4 (и далее 0)
 
Какая система ищет лучше по мере NDCG.


## Решение

$$DCG_p = \sum_{i=1}^{p}\frac{rel_i}{\log_2(i+1)}$$
$$NDCG_p = \frac{DCG_p}{IDCG_p}$$

### Система 1

| $rel_i$ | $\Delta DCG_p$ | $DCG_p$  | $I rel_i$ | $\Delta IDCG_p$ | $IDCG_p$ | $NDCG_p$ |
|---------|----------------|----------|-----------|-----------------|----------|----------|
| 4       | 4              | 4        | 4         | 4               | 4        | 1        |
| 2       | 1,26186        | 5,26186  | 3         | 1,892789        | 5,892789 | 0,892932 |
| 3       | 1,5            | 6,76186  | 2         | 1               | 6,892789 | 0,981005 |
| 1       | 0,430677       | 7,192536 | 2         | 0,861353        | 7,754142 | 0,927573 |
| 2       | 0,773706       | 7,966242 | 1         | 0,386853        | 8,140995 | 0,978534 |
| 0       | 0              | 7,966242 | 0         | 0               | 8,140995 | 0,978534 |

Финальный $NDCG$ системы 1 $\approx \bold{0,978534}$

| $rel_i$ | $\Delta DCG_p$ | $DCG_p$  | $I rel_i$ | $\Delta IDCG_p$ | $IDCG_p$ | $NDCG_p$ |
|---------|----------------|----------|-----------|-----------------|----------|----------|
| 3       | 3              | 3        | 4         | 4               | 4        | 0,75     |
| 2       | 1,26186        | 4,26186  | 4         | 2,523719        | 6,523719 | 0,653287 |
| 4       | 2              | 6,26186  | 4         | 2               | 8,523719 | 0,734639 |
| 4       | 1,722706       | 7,984566 | 3         | 1,29203         | 9,815749 | 0,813444 |
| 4       | 1,547411       | 9,531977 | 2         | 0,773706        | 10,58945 | 0,900139 |
| 0       | 0              | 9,531977 | 0         | 0               | 10,58945 | 0,900139 |

Финальный $NDCG$ системы 2 $\approx \bold{0,900139}$

### Итог

Система 1 показала лучший результат
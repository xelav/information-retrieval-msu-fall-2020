# Задание 6 от 28.09.20 (вторая задача)

Валентин Александров, 620 группа

## Постановка задачи

- При разметке релевантных документов эксперты использовали шкалу от 0 (нерелевантные документы) до 4 баллов.
- При тестировании систем выяснилось, что системы выдали следующие результаты поиска ответов на один и тот же запрос:
    Система 1: 4, 2, 3, 1, 2, 0 (и далее 0)
    Система 2: 3, 2, 4, 4, 4 (и далее 0)
 
Какая система ищет лучше по мере NDCG.

## Решение

$$DCG_p = \sum_{i=1}^{p}\frac{rel_i}{\log_2(i+1)}$$

$$NDCG_p = \frac{DCG_p}{IDCG_p}$$

В качестве идеальных результатов ставим последовательность 4, 4, 4, 4, 4 - все предложенные документы релевантны.

### Система 1

| $rel_i$ | $\Delta DCG_p$ | $DCG_p$  | $I rel_i$ | $\Delta IDCG_p$ | $IDCG_p$ | $NDCG_p$     |
|---------|----------------|----------|-----------|-----------------|----------|--------------|
| 4       | 4              | 4        | 4         | 4               | 4        | 1            |
| 2       | 1,26186        | 5,26186  | 4         | 2,523719        | 6,523719 | 0,806574     |
| 3       | 1,5            | 6,76186  | 4         | 2               | 8,523719 | 0,793299     |
| 1       | 0,430677       | 7,192536 | 4         | 1,722706        | 10,24643 | 0,701956     |
| 2       | 0,773706       | 7,966242 | 4         | 1,547411        | 11,79384 | 0,675458     |
| 0       | 0              | 7,966242 | 0         | 0               | 11,79384 | **0,675458** |

Финальный $NDCG$ системы 1 $\approx \bold{0,675458}$

### Система 2

| $rel_i$ | $\Delta DCG_p$ | $DCG_p$  | $I rel_i$ | $\Delta IDCG_p$ | $IDCG_p$ | $NDCG_p$     |
|---------|----------------|----------|-----------|-----------------|----------|--------------|
| 3       | 3              | 3        | 4         | 4               | 4        | 0,75         |
| 2       | 1,26186        | 4,26186  | 4         | 2,523719        | 6,523719 | 0,653287     |
| 4       | 2              | 6,26186  | 4         | 2               | 8,523719 | 0,734639     |
| 4       | 1,722706       | 7,984566 | 4         | 1,722706        | 10,24643 | 0,779254     |
| 4       | 1,547411       | 9,531977 | 4         | 1,547411        | 11,79384 | 0,808217     |
| 0       | 0              | 9,531977 | 0         | 0               | 11,79384 | **0,808217** |

Финальный $NDCG$ системы 2 $\approx \bold{0,808217}$

### Итог

Система 2 показала лучший результат